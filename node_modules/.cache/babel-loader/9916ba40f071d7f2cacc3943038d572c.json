{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/user/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/user/Login.vue","mtime":1605768204000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvY2hlbnJpeGluL0hEVVdvcmtTdHVkeS9Nb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVG9wTmF2IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vVG9wTmF2LnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZWw6IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnCiAgICAgIH0sCiAgICAgIGNoZWNrZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgVG9wTmF2OiBUb3BOYXYKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc0xvZ2luLCByZXNJbmZvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMuY2hlY2tlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRhamF4LnBvc3QoJy9hcGlMb2dpbicsIF90aGlzLm1vZGVsKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzTG9naW4gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXNMb2dpbi5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc0xvZ2luLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJHRvYXN0LmZhaWwocmVzTG9naW4uZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRhamF4LmdldCgnL2dldEluZm8nKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzSW5mbyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc0luZm8uZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzSW5mby5kYXRhKTsKICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgncm9sZXMnLCBKU09OLnN0cmluZ2lmeShyZXNJbmZvLmRhdGEuZGF0YS5yb2xlcykpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHRvYXN0LnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfnmbvpmYbmiJDlip8nLAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgcm9sZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3JvbGVzJyk7CgogICAgICAgICAgICAgICAgICBpZiAocm9sZSAmJiByb2xlLmluY2x1ZGVzKCflrabnlJ8nKSkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnL2VtcGxveW1lbnQnKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlICYmIHJvbGUuaW5jbHVkZXMoJ+eUqOW3peiAgeW4iCcpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvbWVzc2FnZScpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzLiR0b2FzdC5mYWlsKCfop5LoibLkuI3lrZjlnKghJyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfdGhpcy4kdG9hc3QoJ+ivt+WLvumAiemjjumZqeWRiuefpeS5picpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,MAAA,MAAA,gCAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAVA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,OADA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA,EAAA,KAAA,CAAA,KAAA,CAFA;;AAAA;AAEA,gBAAA,QAFA;;AAGA,oBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,kBAAA,cAAA,CAAA,OAAA,CAAA,OAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,iBAFA,MAEA;AACA,kBAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA;AACA;;AAPA;AAAA,uBAQA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,UAAA,CARA;;AAAA;AAQA,gBAAA,OARA;;AASA,oBAAA,OAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,CAAA,IAAA;AACA,kBAAA,cAAA,CAAA,OAAA,CAAA,OAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA;;AACA,kBAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AAAA,oBAAA,OAAA,EAAA,MAAA;AAAA,oBAAA,QAAA,EAAA;AAAA,mBAAA;AACA;;AACA,gBAAA,UAAA,CAAA,YAAA;AACA,sBAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,OAAA,CAAA;;AACA,sBAAA,IAAA,IAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,EAAA;AACA,oBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA,mBAFA,MAEA,IAAA,IAAA,IAAA,IAAA,CAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AACA,oBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,mBAFA,MAEA;AACA,oBAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA;AACA;AACA,iBATA,EASA,IATA,CAAA;AAdA;AAAA;;AAAA;AAyBA,gBAAA,KAAA,CAAA,MAAA,CAAA,UAAA;;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;AA5BA;AAbA,CAAA","sourcesContent":["<template>\n    <div class=\"login\">\n        <top-nav title=\"登录\" :isShow=\"false\" />\n        <div class=\"logo\">\n            <img src=\"@/assets/image/logo-hdu.png\" alt=\"logo for school\" />\n            <span>杭州电子科技大学</span>\n        </div>\n        <van-form @submit=\"login\">\n            <van-field :border=\"false\" v-model=\"model.username\" label=\"用户名\" placeholder=\"请输入学号/工号\" left-icon=\"user-o\" clearable/>\n            <van-field :border=\"false\" v-model=\"model.password\" type=\"password\" placeholder=\"请输入密码\" label=\"密码\" left-icon=\"lock\" clearable/>\n            <div class=\"checked\">\n                <a>忘记密码？</a>\n                <van-checkbox v-model=\"checked\" shape=\"square\"><a>风险告知书</a></van-checkbox>\n            </div>\n            <van-button round block color=\"rgb(81, 125, 252)\" native-type=\"submit\">\n                登录\n            </van-button>\n        </van-form>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nexport default {\n    data() {\n        return {\n            model: {\n                username: '',\n                password: ''\n            },\n            checked: false\n        }\n    },\n    components: {\n        TopNav\n    },\n    methods: {\n        async login() {\n            if(this.checked) {\n                const resLogin = await this.$ajax.post('/apiLogin',this.model)\n                if(resLogin.data.code === 200) {\n                    sessionStorage.setItem('token',resLogin.data.token)\n                }else {\n                    this.$toast.fail(resLogin.data.msg)\n                }\n                const resInfo = await this.$ajax.get('/getInfo')\n                if(resInfo.data.code === 200) {\n                    console.log(resInfo.data)\n                    sessionStorage.setItem('roles', JSON.stringify(resInfo.data.data.roles))\n                    this.$toast.success({message: '登陆成功',duration: 1000})\n                }\n                setTimeout(() => {\n                    let role = sessionStorage.getItem('roles')\n                    if(role && role.includes('学生')){\n                        this.$router.push('/employment')\n                    }else if(role && role.includes('用工老师')){\n                        this.$router.push('/message')\n                    }else {\n                        this.$toast.fail('角色不存在!')\n                    }\n                },1000)\n            }else {\n                this.$toast('请勾选风险告知书')\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n    .logo {\n        text-align: center;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .logo img {\n        height: 130px;\n        width: 130px;\n        border-radius: 50%;\n        margin-top: 50px;\n    }\n    .logo span {\n        font-size: 14px;\n        margin-top: 10px;\n        margin-bottom: 30px;\n    }\n\n    .van-form {\n        padding: 0 20px;\n    }\n    .van-form .van-field {\n        margin-bottom: 10px;\n        border: 1px solid #eee;\n        border-radius: 3px;\n    }\n    .checked {\n        color: #323233;\n        display: flex;\n        justify-content: space-between;\n        padding: 10px 5px;\n        font-size: 14px;\n    }\n</style>"],"sourceRoot":"src/views/user"}]}