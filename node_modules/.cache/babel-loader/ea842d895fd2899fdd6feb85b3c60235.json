{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/eslint-loader/index.js??ref--13-0!/Users/chenrixin/HDUWorkStudy/Mobile/src/utils/http.js","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/utils/http.js","mtime":1605768204000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBBeGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICJucHJvZ3Jlc3MiOwppbXBvcnQgIm5wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzIjsKdmFyIGh0dHAgPSBBeGlvcy5jcmVhdGUoewogIGJhc2VVUkw6ICIvYXBpIiwKICAvLyBodHRwOi8vOTQuMTkxLjkwLjIyMTo4MTAwL21vY2svNDYvYXBpCiAgdGltZW91dDogMTAwMDAKfSk7IC8vIHJlcXVlc3Tmi6bmiKrlmagKCmh0dHAuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDliqDovb3ov5vluqbmnaEKICBOUHJvZ3Jlc3Muc3RhcnQoKTsKICB2YXIgdG9rZW4gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpIHx8ICcnOwogIHZhciB1cmwgPSBjb25maWcudXJsOwoKICBpZiAodG9rZW4gJiYgdXJsICE9PSAnL2FwaUxvZ2luJykgewogICAgLy/lpoLmnpzmmK/nmbvpmYbpobXpnaLkuI3pnIDopoHluKbkuIp0b2tlbgogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHRva2VuOyAvL+ivt+axguWktOWKoOS4inRva2VuCiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOyAvLyByZXNwb25zZeaLpuaIquWZqAoKaHR0cC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIOe7k+adn+WKoOi9vei/m+W6puadoQogIE5Qcm9ncmVzcy5kb25lKCk7CgogIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDQwMSkgewogICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIFZ1ZS5wcm90b3R5cGUuJHRvYXN0KCfouqvku73ov4fmnJ/vvIzor7fph43mlrDnmbvlvZU9Xz0nKTsKICAgIHJvdXRlci5yZXBsYWNlKCcvbG9naW4nKTsKICB9CgogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycikgewogIE5Qcm9ncmVzcy5kb25lKCk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpleHBvcnQgZGVmYXVsdCBodHRwOw=="},{"version":3,"sources":["/Users/chenrixin/HDUWorkStudy/Mobile/src/utils/http.js"],"names":["Vue","Axios","router","NProgress","http","create","baseURL","timeout","interceptors","request","use","config","start","token","sessionStorage","getItem","url","headers","Authorization","err","Promise","reject","response","done","data","code","removeItem","prototype","$toast","replace"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AAEA,IAAMC,IAAI,GAAGH,KAAK,CAACI,MAAN,CAAa;AACtBC,EAAAA,OAAO,EAAE,MADa;AACL;AACjBC,EAAAA,OAAO,EAAE;AAFa,CAAb,CAAb,C,CAKA;;AACAH,IAAI,CAACI,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACpC;AACAR,EAAAA,SAAS,CAACS,KAAV;AACA,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,KAAmC,EAAjD;AACA,MAAMC,GAAG,GAAGL,MAAM,CAACK,GAAnB;;AACA,MAAIH,KAAK,IAAIG,GAAG,KAAK,WAArB,EAAkC;AAAE;AAChCL,IAAAA,MAAM,CAACM,OAAP,CAAeC,aAAf,GAA+BL,KAA/B,CAD8B,CACO;AACxC;;AACD,SAAOF,MAAP;AACH,CATD,EASG,UAAAQ,GAAG,EAAI;AACN,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACH,CAXD,E,CAaA;;AACAf,IAAI,CAACI,YAAL,CAAkBc,QAAlB,CAA2BZ,GAA3B,CAA+B,UAAAY,QAAQ,EAAI;AACvC;AACAnB,EAAAA,SAAS,CAACoB,IAAV;;AACA,MAAID,QAAQ,CAACE,IAAT,CAAcC,IAAd,KAAuB,GAA3B,EAAgC;AAC5BX,IAAAA,cAAc,CAACY,UAAf,CAA0B,OAA1B;AACA1B,IAAAA,GAAG,CAAC2B,SAAJ,CAAcC,MAAd,CAAqB,eAArB;AACA1B,IAAAA,MAAM,CAAC2B,OAAP,CAAe,QAAf;AACH;;AACD,SAAOP,QAAP;AACH,CATD,EASG,UAAAH,GAAG,EAAI;AACNhB,EAAAA,SAAS,CAACoB,IAAV;AACA,SAAOH,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACH,CAZD;AAcA,eAAef,IAAf","sourcesContent":["import Vue from 'vue'\nimport Axios from \"axios\";\nimport router from '../router'\nimport NProgress from \"nprogress\";\nimport \"nprogress/nprogress.css\";\n\nconst http = Axios.create({\n    baseURL: \"/api\", // http://94.191.90.221:8100/mock/46/api\n    timeout: 10000\n});\n\n// request拦截器\nhttp.interceptors.request.use(config => {\n    // 加载进度条\n    NProgress.start();\n    const token = sessionStorage.getItem('token') || ''\n    const url = config.url\n    if (token && url !== '/apiLogin') { //如果是登陆页面不需要带上token\n        config.headers.Authorization = token //请求头加上token\n    }\n    return config;\n}, err => {\n    return Promise.reject(err);\n});\n\n// response拦截器\nhttp.interceptors.response.use(response => {\n    // 结束加载进度条\n    NProgress.done();\n    if (response.data.code === 401) {\n        sessionStorage.removeItem('token')\n        Vue.prototype.$toast('身份过期，请重新登录=_=')\n        router.replace('/login')\n    }\n    return response;\n}, err => {\n    NProgress.done();\n    return Promise.reject(err);\n});\n\nexport default http;"]}]}