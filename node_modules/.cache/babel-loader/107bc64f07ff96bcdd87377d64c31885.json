{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/publish/Publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/publish/Publish.vue","mtime":1614310652873},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvY2hlbnJpeGluL0hEVVdvcmtTdHVkeS9Nb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2NoZW5yaXhpbi9IRFVXb3JrU3R1ZHkvTW9iaWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRvcE5hdiBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL1RvcE5hdi52dWUnOwppbXBvcnQgQm90dG9tTmF2IGZyb20gJ0AvY29tcG9uZW50cy90ZWFjaGVyL0JvdHRvbU5hdi52dWUnOwppbXBvcnQgTGlzdExheW91dCBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0xpc3RMYXlvdXQudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwdWJsaXNoTGlzdDogW10sCiAgICAgIHNob3c6IGZhbHNlLAogICAgICBwcm9jZXNzU3RhdHVzOiAwLAogICAgICBwYWdlTnVtOiAxLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgVG9wTmF2OiBUb3BOYXYsCiAgICBCb3R0b21OYXY6IEJvdHRvbU5hdiwKICAgIExpc3RMYXlvdXQ6IExpc3RMYXlvdXQKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKGluZGV4LCBpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLnB1Ymxpc2hMaXN0W2luZGV4XSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYWpheC5wb3N0KCcvYXBpL2FjdGl2aXRpL2RlbGV0ZVByb2Nlc3MnLCB7CiAgICAgICAgICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiBpZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5wdWJsaXNoTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHRvYXN0LnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy4kdG9hc3QuZmFpbCgn5Yig6Zmk5aSx6LSl77yM6K+356iN5ZCO6YeN6K+V77yBJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBoYW5kbGVEZXRhaWw6IGZ1bmN0aW9uIGhhbmRsZURldGFpbChpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9qb2JJbmZvJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgcHJvY2Vzc0luc3RhbmNlSWQ6IGlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIucGFnZU51bSsrOwoKICAgICAgICBfdGhpczIuZ2V0UHVibGlzaCgpOwoKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAxMDAwKTsKICAgIH0sCiAgICBnZXRQdWJsaXNoOiBmdW5jdGlvbiBnZXRQdWJsaXNoKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXMsIF90aGlzMyRwdWJsaXNoTGlzdCwgbGlzdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJGFqYXguZ2V0KCIvYXBpL2FjdGl2aXRpL2dldE15UHVibGlzaFNhdGlvbj9wYWdlTnVtPSIuY29uY2F0KF90aGlzMy5wYWdlTnVtLCAiJnBhZ2VTaXplPTciKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgbGlzdCA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKCiAgICAgICAgICAgICAgICAgIChfdGhpczMkcHVibGlzaExpc3QgPSBfdGhpczMucHVibGlzaExpc3QpLnB1c2guYXBwbHkoX3RoaXMzJHB1Ymxpc2hMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkobGlzdCkpOwoKICAgICAgICAgICAgICAgICAgaWYgKGxpc3QubGVuZ3RoIDwgNykgewogICAgICAgICAgICAgICAgICAgIF90aGlzMy5maW5pc2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFuZGxlU3RlcDogZnVuY3Rpb24gaGFuZGxlU3RlcChwcm9jZXNzSWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcmVzLCBzdGF0dXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNC5zaG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuJGFqYXguZ2V0KCcvYXBpL2FjdGl2aXRpL3F1ZXJ5VGFza0RldGFpbHMnLCB7CiAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiBwcm9jZXNzSWQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgc3RhdHVzID0gcmVzLmRhdGEuZGF0YVswXS5yZWplY3RTdGF0dXM7CiAgICAgICAgICAgICAgICBfdGhpczQucHJvY2Vzc1N0YXR1cyA9IHBhcnNlSW50KHN0YXR1cyk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0UHVibGlzaCgpOwogIH0KfTs="},{"version":3,"sources":["Publish.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"publish\">\n        <top-nav title=\"发布管理\" :isShow=\"false\" />\n        <van-cell center title=\"发布用工\" icon=\"wap-nav\">\n            <template #right-icon>\n                <van-icon name=\"plus\" @click=\"$router.push('/publishment')\" size=\"16\"/>\n            </template>\n        </van-cell>\n        <van-dialog v-model=\"show\">\n            <van-steps :active=\"processStatus\" direction=\"vertical\" active-color=\"rgb(36, 126, 255)\">\n                <van-step>已发布</van-step>\n                <van-step>已审批(二级管理员)</van-step>\n                <van-step>待审批(部门管理员)</van-step>\n                <van-step>待审批(一级管理员)</van-step>\n            </van-steps>\n        </van-dialog>\n        <ul class=\"list\">\n            <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"加载完成!!!\" @load=\"onLoad\">\n                <list-layout :firstLayout=\"0\" v-for=\"(item,index) in publishList\" :key=\"index\">\n                    <van-icon size=\"40\" color=\"rgb(81, 125, 252)\" name=\"info\" slot=\"left-icon\"/>\n                    <div slot=\"content\">\n                        <h4 @click=\"handleDetail(item.processInstanceId)\">{{item.stationSubject}}</h4>\n                        <div>\n                            <span>{{item.operateDate}}</span>\n                        </div>\n                    </div>\n                    <div slot=\"right\">\n                        <span class=\"date\">{{item.state}}</span>\n                        <div class=\"right-bottom\">\n                            <van-icon v-if=\"item.stateCode === '4' || item.stateCode === '1'\" @click=\"$router.push('/edit')\" size=\"20\" color=\"rgb(81, 125, 252)\" name=\"edit\"/>\n                            <van-icon v-if=\"item.stateCode === '4'\" class=\"middle\" size=\"20\" color=\"rgb(227, 96, 85)\" name=\"delete\" @click=\"handleDelete(index,item.processInstanceId)\" />\n                            <van-button v-if=\"item.stateCode === '4'\" color=\"rgb(81, 125, 252)\" size=\"mini\">作废</van-button>\n                            <van-button style=\"margin-left: 10px\" v-if=\"item.stateCode === '1'\" color=\"rgb(81, 125, 252)\" size=\"mini\" @click=\"handleStep(item.processInstanceId)\">查看审批</van-button>\n                        </div>\n                    </div>\n                </list-layout>\n            </van-list>\n        </ul>\n        <bottom-nav :active=\"3\"/>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nimport BottomNav from '@/components/teacher/BottomNav.vue'\nimport ListLayout from '@/components/common/ListLayout.vue'\nexport default {\n    data() {\n        return {\n            publishList: [],\n            show: false,\n            processStatus: 0,\n            pageNum: 1,\n            loading: false,\n            finished: false\n        }\n    },\n    components: {\n        TopNav,\n        BottomNav,\n        ListLayout\n    },\n    methods: {\n        async handleDelete(index,id) {\n            console.log(this.publishList[index])\n            const res = await this.$ajax.post('/api/activiti/deleteProcess', {processInstanceId: id})\n            console.log(res.data)\n            if(res.data.code === 200) {\n                this.publishList.splice(index,1)\n                this.$toast.success(res.msg)\n            }else {\n                this.$toast.fail('删除失败，请稍后重试！')\n            }\n        },\n        handleDetail(id) {\n            this.$router.push({\n                path: '/jobInfo',\n                query: {\n                    processInstanceId: id\n                }\n            })\n        },\n        onLoad() {\n            setTimeout(() => {\n                this.pageNum++\n                this.getPublish()\n                this.loading = false\n            },1000)\n        },\n        async getPublish() {\n            const res = await this.$ajax.get(`/api/activiti/getMyPublishSation?pageNum=${this.pageNum}&pageSize=7`)\n            if(res.data.code === 200) {\n                const list = res.data.data.data\n                this.publishList.push(...list)\n                if(list.length < 7) {\n                    this.finished = true\n                }\n            }\n        },\n        async handleStep(processId) {\n            this.show = true\n            const res = await this.$ajax.get('/api/activiti/queryTaskDetails', {params: {processInstanceId: processId}})\n            console.log(res.data)\n            const status = res.data.data[0].rejectStatus\n            this.processStatus = parseInt(status)\n        }\n    },\n    mounted() {\n        this.getPublish()\n    }\n}\n</script>\n\n<style scoped>\n    .middle {\n        margin: 0 10px;\n    }\n    .van-cell {\n        margin-bottom: 10px;\n    }\n</style>"],"sourceRoot":"src/views/teacher/publish"}]}