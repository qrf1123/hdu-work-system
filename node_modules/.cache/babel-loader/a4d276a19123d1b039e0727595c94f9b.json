{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js!/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/eslint-loader/index.js??ref--13-0!/Users/chenrixin/HDUWorkStudy/Mobile/src/utils/http.js","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/utils/http.js","mtime":1614318956575},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBBeGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICJucHJvZ3Jlc3MiOwppbXBvcnQgIm5wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzIjsKdmFyIGh0dHAgPSBBeGlvcy5jcmVhdGUoewogIGJhc2VVUkw6ICIvYXBpIiwKICAvLyBodHRwOi8vOTQuMTkxLjkwLjIyMTo4MTAwL21vY2svNDYvYXBpCiAgLy8gYmFzZVVSTDogIi8iLAogIHRpbWVvdXQ6IDEwMDAwCn0pOyAvLyByZXF1ZXN05oum5oiq5ZmoCgpodHRwLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5Yqg6L296L+b5bqm5p2hCiAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgdmFyIHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJzsKICB2YXIgdXJsID0gY29uZmlnLnVybDsKCiAgaWYgKHRva2VuICYmIHVybCAhPT0gJy9jb21tb24vYXBpTG9naW4nKSB7CiAgICAvL+WmguaenOaYr+eZu+mZhumhtemdouS4jemcgOimgeW4puS4inRva2VuCiAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gdG9rZW47IC8v6K+35rGC5aS05Yqg5LiKdG9rZW4KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7IC8vIHJlc3BvbnNl5oum5oiq5ZmoCgpodHRwLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8g57uT5p2f5Yqg6L296L+b5bqm5p2hCiAgTlByb2dyZXNzLmRvbmUoKTsKCiAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gNDAxKSB7CiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgVnVlLnByb3RvdHlwZS4kdG9hc3QoJ+i6q+S7vei/h+acn++8jOivt+mHjeaWsOeZu+W9lT1fPScpOwogICAgcm91dGVyLnJlcGxhY2UoJy9sb2dpbicpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgTlByb2dyZXNzLmRvbmUoKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGh0dHA7"},{"version":3,"sources":["/Users/chenrixin/HDUWorkStudy/Mobile/src/utils/http.js"],"names":["Vue","Axios","router","NProgress","http","create","baseURL","timeout","interceptors","request","use","config","start","token","sessionStorage","getItem","url","headers","Authorization","err","Promise","reject","response","done","data","code","removeItem","prototype","$toast","replace"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AAEA,IAAMC,IAAI,GAAGH,KAAK,CAACI,MAAN,CAAa;AACtBC,EAAAA,OAAO,EAAE,MADa;AACL;AACjB;AACAC,EAAAA,OAAO,EAAE;AAHa,CAAb,CAAb,C,CAMA;;AACAH,IAAI,CAACI,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACpC;AACAR,EAAAA,SAAS,CAACS,KAAV;AACA,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,KAAmC,EAAjD;AACA,MAAMC,GAAG,GAAGL,MAAM,CAACK,GAAnB;;AACA,MAAIH,KAAK,IAAIG,GAAG,KAAK,kBAArB,EAAyC;AAAE;AACvCL,IAAAA,MAAM,CAACM,OAAP,CAAeC,aAAf,GAA+BL,KAA/B,CADqC,CACA;AACxC;;AACD,SAAOF,MAAP;AACH,CATD,EASG,UAAAQ,GAAG,EAAI;AACN,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACH,CAXD,E,CAaA;;AACAf,IAAI,CAACI,YAAL,CAAkBc,QAAlB,CAA2BZ,GAA3B,CAA+B,UAAAY,QAAQ,EAAI;AACvC;AACAnB,EAAAA,SAAS,CAACoB,IAAV;;AACA,MAAID,QAAQ,CAACE,IAAT,CAAcC,IAAd,KAAuB,GAA3B,EAAgC;AAC5BX,IAAAA,cAAc,CAACY,UAAf,CAA0B,OAA1B;AACA1B,IAAAA,GAAG,CAAC2B,SAAJ,CAAcC,MAAd,CAAqB,eAArB;AACA1B,IAAAA,MAAM,CAAC2B,OAAP,CAAe,QAAf;AACH;;AACD,SAAOP,QAAP;AACH,CATD,EASG,UAAAH,GAAG,EAAI;AACNhB,EAAAA,SAAS,CAACoB,IAAV;AACA,SAAOH,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACH,CAZD;AAcA,eAAef,IAAf","sourcesContent":["import Vue from 'vue'\nimport Axios from \"axios\";\nimport router from '../router'\nimport NProgress from \"nprogress\";\nimport \"nprogress/nprogress.css\";\n\nconst http = Axios.create({\n    baseURL: \"/api\", // http://94.191.90.221:8100/mock/46/api\n    // baseURL: \"/\",\n    timeout: 10000\n});\n\n// request拦截器\nhttp.interceptors.request.use(config => {\n    // 加载进度条\n    NProgress.start();\n    const token = sessionStorage.getItem('token') || ''\n    const url = config.url\n    if (token && url !== '/common/apiLogin') { //如果是登陆页面不需要带上token\n        config.headers.Authorization = token //请求头加上token\n    }\n    return config;\n}, err => {\n    return Promise.reject(err);\n});\n\n// response拦截器\nhttp.interceptors.response.use(response => {\n    // 结束加载进度条\n    NProgress.done();\n    if (response.data.code === 401) {\n        sessionStorage.removeItem('token')\n        Vue.prototype.$toast('身份过期，请重新登录=_=')\n        router.replace('/login')\n    }\n    return response;\n}, err => {\n    NProgress.done();\n    return Promise.reject(err);\n});\n\nexport default http;"]}]}