{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Resign.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Resign.vue","mtime":1618574926364},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUb3BOYXYgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Ub3BOYXYudnVlJwppbXBvcnQgQ2xvY2sgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DbG9jay52dWUnCmZ1bmN0aW9uIGZvcm1hdERhdGUodGltZVN0YW1wKSB7CiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWVTdGFtcCkKICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkKICAgIGxldCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDEKICAgIG1vbnRoID0gbW9udGggPiA5ID8gbW9udGggOiAnMCcgKyBtb250aAogICAgbGV0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpCiAgICBkYXkgPSBkYXkgPiA5ID8gZGF5IDogJzAnICsgZGF5CiAgICBsZXQgaG91ciA9IGRhdGUuZ2V0SG91cnMoKQogICAgaG91ciA9IGhvdXIgPiA5ID8gaG91ciA6ICcwJyArIGhvdXIKICAgIGxldCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKQogICAgbWludXRlID0gbWludXRlID4gOSA/IG1pbnV0ZSA6ICcwJyArIG1pbnV0ZQogICAgbGV0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpCiAgICBzZWNvbmQgPSBzZWNvbmQgPiA5ID8gc2Vjb25kIDogJzAnICsgc2Vjb25kCiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9VCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWAKCn0KZnVuY3Rpb24gZm9ybWF0V29ya0RhdGUodGltZVN0YW1wKXsKICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZVN0YW1wKQogICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKQogICAgbGV0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMQogICAgbW9udGggPSBtb250aCA+IDkgPyBtb250aCA6ICcwJyArIG1vbnRoCiAgICBsZXQgZGF5ID0gZGF0ZS5nZXREYXRlKCkKICAgIGRheSA9IGRheSA+IDkgPyBkYXkgOiAnMCcgKyBkYXkKICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gCn0KZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvL+etvuWIsAogICAgICAgICAgICBtb2RlbDE6IHsKICAgICAgICAgICAgICAgIC8vIOivt+axguaVsOaNrueahOWPguaVsOeci+S4jeaYjueZvQogICAgICAgICAgICAgICAgc3RhdGlvbklkOicnLAogICAgICAgICAgICAgICAgd29ya0RhdGU6JycsCiAgICAgICAgICAgICAgICBzaWduVGltZTonJywKICAgICAgICAgICAgICAgIHNpZ25TdGF0dXM6IjEiLAogICAgICAgICAgICAgICAgcmVzaWduU3RhdHVzOiIxIgogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+etvumAgAogICAgICAgICAgICBtb2RlbDI6IHsKICAgICAgICAgICAgICAgIC8vIOivt+axguaVsOaNrueahOWPguaVsOeci+S4jeaYjueZvQogICAgICAgICAgICAgICAgc3RhdGlvbklkOicnLAogICAgICAgICAgICAgICAgd29ya0RhdGU6JycsCiAgICAgICAgICAgICAgICBzaWduVGltZTonJywKICAgICAgICAgICAgICAgIHNpZ25TdGF0dXM6IjIiLAogICAgICAgICAgICAgICAgcmVzaWduU3RhdHVzOiIxIgogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93UGlja2VyMTogZmFsc2UsCiAgICAgICAgICAgIC8vIHNob3dQaWNrZXIyOiBmYWxzZSwKICAgICAgICAgICAgLy8gc2lnblRpbWU6JycsCiAgICAgICAgICAgIC8vIHN0YXRpb25JZDonJwogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgVG9wTmF2LAogICAgICAgIENsb2NrCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIHJlc2lnbihzKSB7CiAgICAgICAgICAgIHRoaXMubW9kZWwxLnN0YXRpb25JZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnF1ZXJ5LnN0YXRpb25JZCkKICAgICAgICAgICAgdGhpcy5tb2RlbDIuc3RhdGlvbklkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucXVlcnkuc3RhdGlvbklkKQogICAgICAgICAgICB2YXIgcmVzID0gJycKICAgICAgICAgICAgaWYocyA9PT0gMSl7CiAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRhamF4LnBvc3QoJy9zeXN0ZW0vYXBpL3N0dWRlbnQvc2lnbkluT3V0JywgdGhpcy5tb2RlbDEpCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihzID09PSAyKXsKICAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRhamF4LnBvc3QoJy9zeXN0ZW0vYXBpL3N0dWRlbnQvc2lnbkluT3V0JywgdGhpcy5tb2RlbDIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdChyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgIAogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdChyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uQ29uZmlybVN0YXJ0KHRpbWUpIHsKICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gdGltZS5nZXRUaW1lKCkKICAgICAgICAgICAgdGhpcy5tb2RlbDEuc2lnblRpbWUgPSBmb3JtYXREYXRlKHRpbWVTdGFtcCkKICAgICAgICAgICAgdGhpcy5tb2RlbDEud29ya0RhdGUgPSBmb3JtYXRXb3JrRGF0ZSh0aW1lU3RhbXApCiAgICAgICAgICAgIHRoaXMubW9kZWwyLnNpZ25UaW1lID0gZm9ybWF0RGF0ZSh0aW1lU3RhbXApCiAgICAgICAgICAgIHRoaXMubW9kZWwyLndvcmtEYXRlID0gZm9ybWF0V29ya0RhdGUodGltZVN0YW1wKQogICAgICAgICAgICB0aGlzLnNob3dQaWNrZXIxID0gZmFsc2U7CiAgICAgICAgfSwKICAgIH0KfQo="},{"version":3,"sources":["Resign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Resign.vue","sourceRoot":"src/views/student/checkWork","sourcesContent":["<template>\n    <div class=\"resign\">\n        <top-nav title=\"补签\" :isShow=\"true\" />\n        <clock />\n        <div class=\"signForm\">\n            <h4>补签</h4>\n            <van-form >\n                <van-field right-icon=\"calender-o\"\n                readonly\n                clickable\n                name=\"datetimePicker\"\n                :value=\"this.model1.signTime\"\n                label=\"签到签退补录\"\n                placeholder=\"签到签退补录时间\"\n                @click=\"showPicker1 = true\"/>\n\n                <van-popup v-model=\"showPicker1\" position=\"bottom\">\n                    <van-datetime-picker\n                    type=\"datetime\"\n                    title=\"年-月-日-时-分\"\n                    :min-date=\"new Date(2020, 0, 1)\"\n                    @confirm=\"onConfirmStart\"\n                    @cancel=\"showPicker1 = false\"/>\n                </van-popup>\n\n                \n            </van-form>\n            <van-button round  color=\"rgb(81, 125, 252)\" size=\"mini\" style=\"width:100px;height : 30px\" @click=\"resign(1)\">\n                    补签到\n                </van-button>\n                <van-button round  color=\"rgb(81, 125, 252)\" size=\"mini\" style=\"width:100px;height : 30px\" @click=\"resign(2)\">\n                    补签退\n                </van-button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nimport Clock from '@/components/common/Clock.vue'\nfunction formatDate(timeStamp) {\n    var date = new Date(timeStamp)\n    const year = date.getFullYear()\n    let month = date.getMonth() + 1\n    month = month > 9 ? month : '0' + month\n    let day = date.getDate()\n    day = day > 9 ? day : '0' + day\n    let hour = date.getHours()\n    hour = hour > 9 ? hour : '0' + hour\n    let minute = date.getMinutes()\n    minute = minute > 9 ? minute : '0' + minute\n    let second = date.getSeconds()\n    second = second > 9 ? second : '0' + second\n    return `${year}-${month}-${day}T${hour}:${minute}:${second}`\n\n}\nfunction formatWorkDate(timeStamp){\n    var date = new Date(timeStamp)\n    const year = date.getFullYear()\n    let month = date.getMonth() + 1\n    month = month > 9 ? month : '0' + month\n    let day = date.getDate()\n    day = day > 9 ? day : '0' + day\n    return `${year}-${month}-${day}`\n}\nexport default {\n    data() {\n        return {\n            //签到\n            model1: {\n                // 请求数据的参数看不明白\n                stationId:'',\n                workDate:'',\n                signTime:'',\n                signStatus:\"1\",\n                resignStatus:\"1\"\n            },\n            //签退\n            model2: {\n                // 请求数据的参数看不明白\n                stationId:'',\n                workDate:'',\n                signTime:'',\n                signStatus:\"2\",\n                resignStatus:\"1\"\n            },\n            showPicker1: false,\n            // showPicker2: false,\n            // signTime:'',\n            // stationId:''\n        }\n    },\n    components: {\n        TopNav,\n        Clock\n    },\n    methods: {\n        async resign(s) {\n            this.model1.stationId = parseInt(this.$route.query.stationId)\n            this.model2.stationId = parseInt(this.$route.query.stationId)\n            var res = ''\n            if(s === 1){\n                res = await this.$ajax.post('/system/api/student/signInOut', this.model1)\n                // console.log(res.data)\n            }\n            if(s === 2){\n                 res = await this.$ajax.post('/system/api/student/signInOut', this.model2)\n            }\n            if(res.data.code === 200) {\n                this.$toast(res.data.msg)\n               \n            }else {\n                this.$toast(res.data.msg)\n            }\n        },\n        onConfirmStart(time) {\n            const timeStamp = time.getTime()\n            this.model1.signTime = formatDate(timeStamp)\n            this.model1.workDate = formatWorkDate(timeStamp)\n            this.model2.signTime = formatDate(timeStamp)\n            this.model2.workDate = formatWorkDate(timeStamp)\n            this.showPicker1 = false;\n        },\n    }\n}\n</script>\n\n<style scoped>\n    .signForm {\n        background-color: white;\n        padding: 20px;\n    }\n    .signForm h4 {\n        text-align: center;\n        margin-bottom: 10px;\n    }\n    .van-form .van-field {\n        text-align: left;\n    }\n    .van-form .van-button {\n        width: 90%;\n        margin: 15px auto 0;\n    }\n    .van-field >>> .van-icon {\n        color: rgb(81, 125, 252);\n    }\n</style>"]}]}