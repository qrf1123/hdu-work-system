{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/publish/Form.vue?vue&type=style&index=0&id=968d8f56&scoped=true&lang=css&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/publish/Form.vue","mtime":1605768204000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi52YW4tYnV0dG9uIHsKICAgIHdpZHRoOiA5NSU7CiAgICBtYXJnaW46IDE1cHggYXV0bzsKfQo="},{"version":3,"sources":["Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA","file":"Form.vue","sourceRoot":"src/views/teacher/publish","sourcesContent":["<template>\n    <div>\n        <top-nav :title=\"title\" :isShow=\"true\" />\n        <van-form @submit=\"onSubmit\">\n            <van-field required v-model=\"model.stationSubject\" label=\"主题\" rows=\"1\" autosize clearable type=\"textarea\" placeholder=\"主题\"/>\n            <van-field required name=\"radio\" label=\"用工范围\">\n                <template #input>\n                    <van-radio-group v-model=\"model.stationLimits\" direction=\"horizontal\">\n                        <van-radio name=\"1\">本科生</van-radio>\n                        <van-radio name=\"2\">研究生</van-radio>\n                        <van-radio name=\"3\">不限</van-radio>\n                    </van-radio-group>\n                </template>\n            </van-field>\n            <van-field required label=\"开始日期\" readonly clickable name=\"calendar\" :value=\"model.workStartTime\"  placeholder=\"点击选择日期\" @click=\"showCalendar1 = true\"/>\n            <van-calendar :min-date=\"minDate\" :max-date=\"maxDate\" color=\"rgb(81, 125, 252)\" v-model=\"showCalendar1\" @confirm=\"onConfirmStart\" />\n            <van-field required label=\"结束日期\" readonly clickable name=\"calendar\" :value=\"model.workEndTime\"  placeholder=\"点击选择日期\" @click=\"showCalendar2 = true\"/>\n            <van-calendar :min-date=\"minDate\" :max-date=\"maxDate\" color=\"rgb(81, 125, 252)\" v-model=\"showCalendar2\" @confirm=\"onConfirmEnd\" />\n            <van-field required readonly clickable name=\"picker\" :value=\"term\" label=\"用工学期\" placeholder=\"点击选择学期\" @click=\"showPicker1 = true\"/>\n            <van-popup v-model=\"showPicker1\" position=\"bottom\">\n                <van-picker show-toolbar :columns=\"termOptions\" @confirm=\"onConfirmTerm\" @cancel=\"showPicker1 = false\"/>\n            </van-popup>\n            <van-field required readonly clickable name=\"picker\" :value=\"stationType\" label=\"工种\" placeholder=\"点击选择工种\" @click=\"showPicker = true\"/>\n            <van-popup v-model=\"showPicker\" position=\"bottom\">\n                <van-picker show-toolbar :columns=\"jobCategory\" @confirm=\"onConfirmJob\" @cancel=\"showPicker = false\"/>\n            </van-popup>\n            <van-field required name=\"radio\" label=\"院校级别\">\n                <template #input>\n                    <van-radio-group v-model=\"model.stationScope\" direction=\"horizontal\">\n                        <van-radio name=\"1\">校级岗</van-radio>\n                        <van-radio name=\"2\">院级岗</van-radio>\n                    </van-radio-group>\n                </template>\n            </van-field>\n            <van-field required label=\"总需求人数\" v-model.number=\"model.totalNum\" placeholder=\"总需求人数\" type=\"digit\"/>\n            <van-field label=\"贫困生人数\" v-model.number=\"model.poorNum\" placeholder=\"贫困生人数\" type=\"digit\"/>\n            <van-field label=\"非贫困生人数\" v-model.number=\"model.nonpoorNum\" placeholder=\"非贫困生人数\" type=\"digit\"/>\n            <van-field label=\"外学院人数\" v-model.number=\"model.otherDeptNum\" placeholder=\"外学院人数\" type=\"digit\"/>\n            <van-field label=\"技能要求\" v-model=\"model.skillQeruire\"  rows=\"1\" autosize clearable type=\"textarea\" placeholder=\"技能要求\"/>\n            <van-field required label=\"工作内容\" v-model=\"model.stationContent\" rows=\"1\" autosize clearable type=\"textarea\" placeholder=\"工作内容\"/>\n            <van-field required label=\"工作地点\" v-model=\"model.stationLocation\" rows=\"1\" autosize clearable type=\"textarea\" placeholder=\"工作地点\"/>\n            <van-field label=\"备注说明\" v-model=\"model.remarkContent\" rows=\"1\" autosize clearable type=\"textarea\" placeholder=\"其他说明\"/>\n            <van-button round block type=\"info\" native-type=\"submit\">\n                {{$route.path ==='/publishment' ? '确认提交' : '确认修改'}}\n            </van-button>\n        </van-form>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nexport default {\n    props: ['title'],\n    data() {\n        return {\n            detail: {},\n            model: {\n                stationSubject: '',\n                stationLimits: '',\n                workStartTime: '',\n                workEndTime: '',\n                termId: '',\n                stationType: '',\n                stationScope: '',\n                totalNum: '',\n                poorNum: '',\n                nonpoorNum: '',\n                otherDeptNum: '',\n                skillQeruire: '',\n                stationContent: '',\n                stationLocation: '',\n                remarkContent: ''\n            },\n            term: '',\n            termOptions: [],\n            stationType: '',\n            jobCategory: ['固定岗','临时岗','假期岗','助教岗','研究生助教'],\n            showCalendar1: false,\n            showCalendar2: false,\n            showPicker: false,\n            showPicker1: false,\n            minDate: new Date(2020, 1, 1), // 测试日期 后端设置的测试日期范围 不在这个范围提交便会报错！\n            maxDate: new Date(2020, 5, 30), // 测试日期 后端设置的测试日期范围 不在这个范围提交便会报错！\n        }\n    },\n    components: {\n        TopNav\n    },\n    methods: {\n        onConfirmStart(date) {\n            this.model.workStartTime = this.formatMyDate(date)\n            this.showCalendar1 = false;\n        },\n        onConfirmEnd(date) {\n            this.model.workEndTime = this.formatMyDate(date)\n            this.showCalendar2 = false;\n        },\n        onConfirmJob(value,index) {\n            this.stationType = value\n            this.model.stationType = `${index + 1}`\n            this.showPicker = false\n        },\n        onConfirmTerm(value,index) {\n            this.term = value\n            this.model.termId = index + 1\n            this.showPicker1 = false\n        },\n        async onSubmit() {\n            var isEmplty = false\n            for(let key in this.model) {\n                if(key !== 'poorNum' && key!=='nonpoorNum' && key!=='otherDeptNum' && key!=='skillQeruire' && key!=='remarkContent') {\n                    if(!this.model[key]) {\n                        this.$toast.fail('必填项不能为空!!!')\n                        isEmplty = true\n                        break\n                    }\n                }\n            }\n            if(!isEmplty) {\n                const res = await this.$ajax.post('/api/activiti/startWorkStationApply', this.model)\n                if(res.data.code === 200) {\n                    this.$toast.success(res.data.msg)\n                    this.$router.push('/publish')\n                }else {\n                    this.$toast.fail('申请失败，请稍后重试')\n                }\n            }\n        },\n        formatMyDate(date) {\n            let year = date.getFullYear()\n            let month = date.getMonth() + 1\n            month = month < 10 ? ('0' + month) : month\n            let d = date.getDate()\n            d = d < 10 ? ('0' + d) : d\n            return `${year}-${month}-${d}`\n        },\n        getTermOptions() {\n            const year = new Date().getFullYear()\n            if(new Date().getMonth() + 1< 9) {\n                const term = `${year -1}-${year}`\n                return [`${term}第一学期`, `${term}第二学期`]\n            } else {\n                const term = `${year}-${year + 1}`\n                return [`${term}第一学期`, `${term}第二学期`]\n            }\n        }\n    },\n    mounted() {\n        this.termOptions = this.getTermOptions()\n    }\n}\n</script>\n\n<style scoped>\n.van-button {\n    width: 95%;\n    margin: 15px auto;\n}\n</style>"]}]}