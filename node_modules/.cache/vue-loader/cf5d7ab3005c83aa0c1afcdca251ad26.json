{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Resign.vue?vue&type=style&index=0&id=55b234d4&scoped=true&lang=css&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Resign.vue","mtime":1616771148202},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouc2lnbkZvcm0gewogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAyMHB4Owp9Ci5zaWduRm9ybSBoNCB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBtYXJnaW4tYm90dG9tOiAxMHB4Owp9Ci52YW4tZm9ybSAudmFuLWZpZWxkIHsKICAgIHRleHQtYWxpZ246IGxlZnQ7Cn0KLnZhbi1mb3JtIC52YW4tYnV0dG9uIHsKICAgIHdpZHRoOiA5MCU7CiAgICBtYXJnaW46IDE1cHggYXV0byAwOwp9Ci52YW4tZmllbGQgPj4+IC52YW4taWNvbiB7CiAgICBjb2xvcjogcmdiKDgxLCAxMjUsIDI1Mik7Cn0K"},{"version":3,"sources":["Resign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Resign.vue","sourceRoot":"src/views/student/checkWork","sourcesContent":["<template>\n    <div class=\"resign\">\n        <top-nav title=\"补签\" :isShow=\"true\" />\n        <clock />\n        <div class=\"signForm\">\n            <h4>补签</h4>\n            <van-form >\n                <van-field right-icon=\"calender-o\"\n                readonly\n                clickable\n                name=\"datetimePicker\"\n                :value=\"this.model1.signTime\"\n                label=\"签到签退补录\"\n                placeholder=\"签到签退补录时间\"\n                @click=\"showPicker1 = true\"/>\n\n                <van-popup v-model=\"showPicker1\" position=\"bottom\">\n                    <van-datetime-picker\n                    type=\"datetime\"\n                    title=\"年-月-日-时-分\"\n                    :min-date=\"new Date(2020, 0, 1)\"\n                    @confirm=\"onConfirmStart\"\n                    @cancel=\"showPicker1 = false\"/>\n                </van-popup>\n\n                \n            </van-form>\n            <van-button round  color=\"rgb(81, 125, 252)\" size=\"mini\" style=\"width:100px;height : 30px\" @click=\"resign(1)\">\n                    补签到\n                </van-button>\n                <van-button round  color=\"rgb(81, 125, 252)\" size=\"mini\" style=\"width:100px;height : 30px\" @click=\"resign(2)\">\n                    补签退\n                </van-button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nimport Clock from '@/components/common/Clock.vue'\nfunction formatDate(timeStamp) {\n    var date = new Date(timeStamp)\n    const year = date.getFullYear()\n    let month = date.getMonth() + 1\n    month = month > 9 ? month : '0' + month\n    let day = date.getDate()\n    day = day > 9 ? day : '0' + day\n    let hour = date.getHours()\n    hour = hour > 9 ? hour : '0' + hour\n    let minute = date.getMinutes()\n    minute = minute > 9 ? minute : '0' + minute\n    let second = date.getSeconds()\n    second = second > 9 ? second : '0' + second\n    return `${year}-${month}-${day}T${hour}:${minute}:${second}`\n\n}\nfunction formatWorkDate(timeStamp){\n    var date = new Date(timeStamp)\n    const year = date.getFullYear()\n    let month = date.getMonth() + 1\n    month = month > 9 ? month : '0' + month\n    let day = date.getDate()\n    day = day > 9 ? day : '0' + day\n    return `${year}-${month}-${day}`\n}\nexport default {\n    data() {\n        return {\n            //签到\n            model1: {\n                // 请求数据的参数看不明白\n                stationId:'',\n                workDate:'',\n                signTime:'',\n                signStatus:\"1\",\n                resignStatus:\"1\"\n            },\n            //签退\n            model2: {\n                // 请求数据的参数看不明白\n                stationId:'',\n                workDate:'',\n                signTime:'',\n                signStatus:\"2\",\n                resignStatus:\"1\"\n            },\n            showPicker1: false,\n            // showPicker2: false,\n            // signTime:'',\n            // stationId:''\n        }\n    },\n    components: {\n        TopNav,\n        Clock\n    },\n    methods: {\n        async resign(s) {\n            this.model1.stationId = parseInt(this.$route.query.stationId)\n            this.model2.stationId = parseInt(this.$route.query.stationId)\n            var res = ''\n            if(s === 1){\n                res = await this.$ajax.post('/system/api/student/signInOut', this.model1)\n                // console.log(res.data)\n            }\n            if(s === 2){\n                 res = await this.$ajax.post('/system/api/student/signInOut', this.model2)\n            }\n            if(res.data.code === 200) {\n                this.$toast(res.data.msg)\n                // for(let key in this.model) {\n                //     this.model[key] = ''\n                // }\n            }else {\n                this.$toast('补签失败，请稍后重试')\n            }\n            // console.log(this.model)\n            // const res = await this.$ajax.post('/system/hours/resign', this.model)\n            // console.log(res.data)\n            // if(res.data.code === 200) {\n            //     this.$toast(res.data.msg)\n            //     for(let key in this.model) {\n            //         this.model[key] = ''\n            //     }\n            // }else {\n            //     this.$toast('补签失败，请稍后重试')\n            // }\n        },\n        onConfirmStart(time) {\n            const timeStamp = time.getTime()\n            this.model1.signTime = formatDate(timeStamp)\n            this.model1.workDate = formatWorkDate(timeStamp)\n            this.model2.signTime = formatDate(timeStamp)\n            this.model2.workDate = formatWorkDate(timeStamp)\n            this.showPicker1 = false;\n        },\n        // onConfirmEnd(time) {\n        //     const timeStamp = time.getTime()\n        //     this.model.signoutTime = formatDate(timeStamp)\n        //     this.showPicker2 = false;\n        // }\n    }\n}\n</script>\n\n<style scoped>\n    .signForm {\n        background-color: white;\n        padding: 20px;\n    }\n    .signForm h4 {\n        text-align: center;\n        margin-bottom: 10px;\n    }\n    .van-form .van-field {\n        text-align: left;\n    }\n    .van-form .van-button {\n        width: 90%;\n        margin: 15px auto 0;\n    }\n    .van-field >>> .van-icon {\n        color: rgb(81, 125, 252);\n    }\n</style>"]}]}