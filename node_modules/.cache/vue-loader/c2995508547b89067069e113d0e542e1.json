{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Resign.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Resign.vue","mtime":1605768204000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUb3BOYXYgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Ub3BOYXYudnVlJwppbXBvcnQgQ2xvY2sgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DbG9jay52dWUnCmZ1bmN0aW9uIGZvcm1hdERhdGUodGltZVN0YW1wKSB7CiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWVTdGFtcCkKICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkKICAgIGxldCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDEKICAgIG1vbnRoID0gbW9udGggPiA5ID8gbW9udGggOiAnMCcgKyBtb250aAogICAgbGV0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpCiAgICBkYXkgPSBkYXkgPiA5ID8gZGF5IDogJzAnICsgZGF5CiAgICBsZXQgaG91ciA9IGRhdGUuZ2V0SG91cnMoKQogICAgaG91ciA9IGhvdXIgPiA5ID8gaG91ciA6ICcwJyArIGhvdXIKICAgIGxldCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKQogICAgbWludXRlID0gbWludXRlID4gOSA/IG1pbnV0ZSA6ICcwJyArIG1pbnV0ZQogICAgbGV0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpCiAgICBzZWNvbmQgPSBzZWNvbmQgPiA5ID8gc2Vjb25kIDogJzAnICsgc2Vjb25kCiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9VCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWAKCn0KZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgICAgc2lnbmluVGltZTonJywKICAgICAgICAgICAgICAgIHNpZ25vdXRUaW1lOiAnJywKICAgICAgICAgICAgICAgIHJlbWFya0NvbnRlbnQ6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNob3dQaWNrZXIxOiBmYWxzZSwKICAgICAgICAgICAgc2hvd1BpY2tlcjI6IGZhbHNlLAogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgVG9wTmF2LAogICAgICAgIENsb2NrCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIHJlc2lnbigpIHsKICAgICAgICAgICAgdGhpcy5tb2RlbC5zdGF0aW9uSWQgPSBwYXJzZUludCh0aGlzLiRyb3V0ZS5xdWVyeS5zdGF0aW9uSWQpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubW9kZWwpCiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGFqYXgucG9zdCgnL3N5c3RlbS9ob3Vycy9yZXNpZ24nLCB0aGlzLm1vZGVsKQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdChyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICBmb3IobGV0IGtleSBpbiB0aGlzLm1vZGVsKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbFtrZXldID0gJycKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoJ+ihpeetvuWksei0pe+8jOivt+eojeWQjumHjeivlScpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uQ29uZmlybVN0YXJ0KHRpbWUpIHsKICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gdGltZS5nZXRUaW1lKCkKICAgICAgICAgICAgdGhpcy5tb2RlbC5zaWduaW5UaW1lID0gZm9ybWF0RGF0ZSh0aW1lU3RhbXApCiAgICAgICAgICAgIHRoaXMuc2hvd1BpY2tlcjEgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIG9uQ29uZmlybUVuZCh0aW1lKSB7CiAgICAgICAgICAgIGNvbnN0IHRpbWVTdGFtcCA9IHRpbWUuZ2V0VGltZSgpCiAgICAgICAgICAgIHRoaXMubW9kZWwuc2lnbm91dFRpbWUgPSBmb3JtYXREYXRlKHRpbWVTdGFtcCkKICAgICAgICAgICAgdGhpcy5zaG93UGlja2VyMiA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["Resign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Resign.vue","sourceRoot":"src/views/student/checkWork","sourcesContent":["<template>\n    <div class=\"resign\">\n        <top-nav title=\"补签\" :isShow=\"true\" />\n        <clock />\n        <div class=\"signForm\">\n            <h4>补签</h4>\n            <van-form @submit=\"resign\">\n                <van-field right-icon=\"calender-o\"\n                readonly\n                clickable\n                name=\"datetimePicker\"\n                :value=\"model.signinTime\"\n                label=\"签到补录\"\n                placeholder=\"签到补录时间\"\n                @click=\"showPicker1 = true\"/>\n                <van-popup v-model=\"showPicker1\" position=\"bottom\">\n                    <van-datetime-picker\n                    type=\"datetime\"\n                    title=\"年-月-日-时-分\"\n                    :min-date=\"new Date(2020, 0, 1)\"\n                    @confirm=\"onConfirmStart\"\n                    @cancel=\"showPicker1 = false\"/>\n                </van-popup>\n                <van-field\n                right-icon=\"calender-o\"\n                readonly\n                clickable\n                name=\"datetimePicker\"\n                :value=\"model.signoutTime\"\n                label=\"签退补录\"\n                placeholder=\"签退补录时间\"\n                @click=\"showPicker2 = true\"/>\n                <van-popup v-model=\"showPicker2\" position=\"bottom\">\n                    <van-datetime-picker\n                    type=\"datetime\"\n                    title=\"年-月-日-时-分\"\n                    :min-date=\"new Date(2020, 0, 1)\"\n                    @confirm=\"onConfirmEnd\"\n                    @cancel=\"showPicker2 = false\"/>\n                </van-popup>\n                <van-field\n                label=\"补签原因\"\n                v-model=\"model.remarkContent\"\n                placeholder=\"请输入原因\" />\n                <van-button round block color=\"rgb(81, 125, 252)\" native-type=\"submit\">\n                    提交\n                </van-button>\n            </van-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nimport Clock from '@/components/common/Clock.vue'\nfunction formatDate(timeStamp) {\n    var date = new Date(timeStamp)\n    const year = date.getFullYear()\n    let month = date.getMonth() + 1\n    month = month > 9 ? month : '0' + month\n    let day = date.getDate()\n    day = day > 9 ? day : '0' + day\n    let hour = date.getHours()\n    hour = hour > 9 ? hour : '0' + hour\n    let minute = date.getMinutes()\n    minute = minute > 9 ? minute : '0' + minute\n    let second = date.getSeconds()\n    second = second > 9 ? second : '0' + second\n    return `${year}-${month}-${day}T${hour}:${minute}:${second}`\n\n}\nexport default {\n    data() {\n        return {\n            model: {\n                signinTime:'',\n                signoutTime: '',\n                remarkContent: ''\n            },\n            showPicker1: false,\n            showPicker2: false,\n        }\n    },\n    components: {\n        TopNav,\n        Clock\n    },\n    methods: {\n        async resign() {\n            this.model.stationId = parseInt(this.$route.query.stationId)\n            console.log(this.model)\n            const res = await this.$ajax.post('/system/hours/resign', this.model)\n            console.log(res.data)\n            if(res.data.code === 200) {\n                this.$toast(res.data.msg)\n                for(let key in this.model) {\n                    this.model[key] = ''\n                }\n            }else {\n                this.$toast('补签失败，请稍后重试')\n            }\n        },\n        onConfirmStart(time) {\n            const timeStamp = time.getTime()\n            this.model.signinTime = formatDate(timeStamp)\n            this.showPicker1 = false;\n        },\n        onConfirmEnd(time) {\n            const timeStamp = time.getTime()\n            this.model.signoutTime = formatDate(timeStamp)\n            this.showPicker2 = false;\n        }\n    }\n}\n</script>\n\n<style scoped>\n    .signForm {\n        background-color: white;\n        padding: 20px;\n    }\n    .signForm h4 {\n        text-align: center;\n        margin-bottom: 10px;\n    }\n    .van-form .van-field {\n        text-align: left;\n    }\n    .van-form .van-button {\n        width: 90%;\n        margin: 15px auto 0;\n    }\n    .van-field >>> .van-icon {\n        color: rgb(81, 125, 252);\n    }\n</style>"]}]}