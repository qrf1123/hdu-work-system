{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Record.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/student/checkWork/Record.vue","mtime":1618727339166},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUb3BOYXYgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Ub3BOYXYudnVlJwppbXBvcnQgTGlzdExheW91dCBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0xpc3RMYXlvdXQudnVlJwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxpc3Q6IFtdLAogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgICAgc3RhcnREYXRlOiAnJywKICAgICAgICAgICAgICAgIGVuZERhdGU6ICcnCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb3B0aW9uMTogWwogICAgICAgICAgICAgICAgLy8geyB0ZXh0OiAn6YCJ5oup6YOo6ZeoJyx2YWx1ZSA6IDB9LAogICAgICAgICAgICBdLAogICAgICAgICAgICBzaG93Q2FsZW5kYXIxOiBmYWxzZSwKICAgICAgICAgICAgc2hvd0NhbGVuZGFyMjogZmFsc2UsCiAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICAgICAgICByZXN1bHQ6IFtdLAogICAgICAgICAgICBob3Vyc0xpc3Q6JycsCiAgICAgICAgICAgIHNob3dTdGF0aW9uSWQ6ZmFsc2UsCiAgICAgICAgICAgIHN0YXRpb25JZCA6IDEsCiAgICAgICAgICAgIC8vIOi/meS4quWQjue7reWGjeaUueato+WQpwogICAgICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgyMDIwLCAwLCAxKSwKICAgICAgICAgICAgbWF4RGF0ZTogbmV3IERhdGUoMjAzMCwgMCwgMzEpLAogICAgICAgICAgICBzdGF0aW9uSWRzOltdLAogICAgICAgICAgICBzdGF0aW9uTmFtZTonJywKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIExpc3RMYXlvdXQsCiAgICAgICAgVG9wTmF2CgogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAgYXN5bmMgZ2V0U3RhdGlvbkxpc3QoKXsKICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGFqYXguZ2V0KCcvc3lzdGVtL2FwaS9zdHVkZW50L2dldE15U3RhdGlvbnMnKQogICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZSA9PT0gMjAwICl7CiAgICAgICAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JycsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOicnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRlbXAudGV4dCA9IGl0ZW0uc3RhdGlvbk5hbWU7CiAgICAgICAgICAgICAgICAgICAgdGVtcC52YWx1ZSA9IGl0ZW0uc3RhdGlvbklkOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uMS5wdXNoKHRlbXApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvL+WvueixoeaVsOe7hOWOu+mHjQogICAgICAgICAgICAgICAgdGhpcy5vcHRpb24xID0gdGhpcy5vcHRpb24xLmZpbHRlcihmdW5jdGlvbihpdGVtLGluZGV4LHNlbGYpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmZpbmRJbmRleChlbD0+ZWwudmFsdWU9PWl0ZW0udmFsdWUpPT09aW5kZXgKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLy8gdGhpcy5vcHRpb24xID0gWy4uLm5ldyBTZXQodGhpcy5jaG9pY2VzKV07CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygibXkgc3RhdGlvbnMiICsgdGhpcy5vcHRpb24xWzFdLnZhbHVlKTsKICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIpOwogICAgICAgICAgICAgfQogICAgICAgICB9LAogICAgICAgICBhc3luYyBzaWduUmVjb3JkcygpewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhamF4LmdldCgnL3N5c3RlbS9hcGkvc3R1ZGVudC9zaWduUmVjb3JkcycsCiAgICAgICAgICAgIHtwYXJhbXMgOnsKICAgICAgICAgICAgICAgIHNlYXJjaFN0YXJ0RGF0ZSA6IHRoaXMubW9kZWwuc3RhcnREYXRlLAogICAgICAgICAgICAgICAgc2VhcmNoRW5kRGF0ZSA6IHRoaXMubW9kZWwuZW5kRGF0ZSwKICAgICAgICAgICAgICAgIHN0YXRpb25JZCA6IHRoaXMuc3RhdGlvbklkLAogICAgICAgICAgICB9fQogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpOwogICAgICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICB0aGlzLnN0YXRpb25OYW1lID0gcmVzLmRhdGEuc3RhdGlvbk5hbWVzCiAgICAgICAgfSwKICAgICAgICBvbkNvbmZpcm1TdGFydChkYXRlKSB7CiAgICAgICAgICAgIHRoaXMubW9kZWwuc3RhcnREYXRlID0gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0keyhkYXRlLmdldE1vbnRoKCkgKyAxKT45PyhkYXRlLmdldE1vbnRoKCkgKyAxKTonMCcrKGRhdGUuZ2V0TW9udGgoKSArIDEpfS0keyhkYXRlLmdldERhdGUoKSk+OT8oZGF0ZS5nZXREYXRlKCkpOicwJysoZGF0ZS5nZXREYXRlKCkpfWA7CiAgICAgICAgICAgIHRoaXMuc2hvd0NhbGVuZGFyMSA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgb25Db25maXJtRW5kKGRhdGUpIHsKICAgICAgICAgICAgdGhpcy5tb2RlbC5lbmREYXRlID0gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0keyhkYXRlLmdldE1vbnRoKCkgKyAxKT45PyhkYXRlLmdldE1vbnRoKCkgKyAxKTonMCcrKGRhdGUuZ2V0TW9udGgoKSArIDEpfS0keyhkYXRlLmdldERhdGUoKSk+OT8oZGF0ZS5nZXREYXRlKCkpOicwJysoZGF0ZS5nZXREYXRlKCkpfWA7CiAgICAgICAgICAgIHRoaXMuc2hvd0NhbGVuZGFyMiA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgY2hhbmdlU3RhdGlvbklkKHZhbHVlKXsKICAgICAgICAgICAgdGhpcy5zdGF0aW9uSWQgPSB2YWx1ZS52YWx1ZTsKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldFN0YXRpb25MaXN0KCkKICAgIH0KfQo="},{"version":3,"sources":["Record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Record.vue","sourceRoot":"src/views/student/checkWork","sourcesContent":["<template>\n    <div>\n        <top-nav title=\"签到签退记录\" :isShow=\"true\" />\n        <div class=\"dateSelect\">\n            <!-- <van-field  :border=\"false\" label=\"查询岗位\" right-icon=\"calender-o\" readonly clickable  name=\"stationId\" :value=\"stationId\" placeholder=\"请选择查询岗位\" @click=\"showStationId = true\"/>\n            <van-picker v-model=\"showStationId\" title=\"查询岗位\"  :columns=\"columns\" @confirm=\"onConfirmStationId\" /> -->\n            <van-dropdown-menu >\n                <van-dropdown-item @change=\"changeStationId(value)\" v-model=\"stationId\"  :options=\"option1\" />\n            </van-dropdown-menu>\n            <van-field :border=\"false\" label=\"起始日期\" right-icon=\"calender-o\" readonly clickable name=\"calendar\" :value=\"model.startDate\"  placeholder=\"点击选择日期\" @click=\"showCalendar1 = true\" />\n            <van-calendar v-model=\"showCalendar1\" @confirm=\"onConfirmStart\" :min-date=\"minDate\" :max-date=\"maxDate\" :show-confirm=\"false\"/>\n            <van-field :border=\"false\" label=\"终止日期\" right-icon=\"calender-o\" readonly clickable name=\"calendar\" :value=\"model.endDate\"  placeholder=\"点击选择日期\" @click=\"showCalendar2 = true\" />\n            <van-calendar v-model=\"showCalendar2\" @confirm=\"onConfirmEnd\" :min-date=\"minDate\" :max-date=\"maxDate\" :show-confirm=\"false\"/>\n        </div>\n        <ul class=\"list\">\n            <list-layout :firstLayout=\"1\" v-for=\"(item,index) in list\" :key=\"index\">\n                <van-icon size=\"40\" color=\"rgb(81, 125, 252)\" name=\"clock-o\" slot=\"left-icon\"/>\n                <div slot=\"content\">\n                    <h4>{{stationName}}</h4>\n                    <div>\n                        <span>是否补签:{{(item.resignStatus) === \"0\"?\"否\":\"是\"}}</span>\n                        <span>{{item.signStatus === \"1\"?\"签到时间\":\"签退时间\"}}:{{(item.signTime).slice(0,10)+ \" \" +(item.signTime).slice(11,19)}}</span>\n                        <!-- <span>用工老师{{item.teacher}}</span>\n                        <span>考勤时间：{{item.signTime}}</span> -->\n                    </div>\n                </div>\n            </list-layout>\n        </ul>\n\n\n        <van-cell class=\"bottomBtn\" title=\"\" clickable >\n            <template #right-icon>\n                <van-button color=\"rgb(81, 125, 252)\" size=\"mini\" @click=\"signRecords()\">查询</van-button>\n            </template>\n        </van-cell>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nimport ListLayout from '@/components/common/ListLayout.vue'\nexport default {\n    data() {\n        return {\n            list: [],\n            model: {\n                startDate: '',\n                endDate: ''\n                \n            },\n            option1: [\n                // { text: '选择部门',value : 0},\n            ],\n            showCalendar1: false,\n            showCalendar2: false,\n            checked: false,\n            result: [],\n            hoursList:'',\n            showStationId:false,\n            stationId : 1,\n            // 这个后续再改正吧\n            minDate: new Date(2020, 0, 1),\n            maxDate: new Date(2030, 0, 31),\n            stationIds:[],\n            stationName:'',\n        }\n    },\n    components: {\n        ListLayout,\n        TopNav\n\n    },\n    methods: {\n         async getStationList(){\n             const res = await this.$ajax.get('/system/api/student/getMyStations')\n             if(res.data.code === 200 ){\n                res.data.data.forEach(item => {\n                    var temp = {\n                        text:'',\n                        value:''\n                    }\n                    temp.text = item.stationName;\n                    temp.value = item.stationId;\n                    this.option1.push(temp);\n                });\n                //对象数组去重\n                this.option1 = this.option1.filter(function(item,index,self){\n                    return self.findIndex(el=>el.value==item.value)===index\n                    })\n                // this.option1 = [...new Set(this.choices)];\n                console.log(\"my stations\" + this.option1[1].value);\n             }else{\n                 console.log(\"error\");\n             }\n         },\n         async signRecords(){\n            const res = await this.$ajax.get('/system/api/student/signRecords',\n            {params :{\n                searchStartDate : this.model.startDate,\n                searchEndDate : this.model.endDate,\n                stationId : this.stationId,\n            }}\n            )\n            console.log(res.data.data);\n            this.list = res.data.data;\n            this.stationName = res.data.stationNames\n        },\n        onConfirmStart(date) {\n            this.model.startDate = `${date.getFullYear()}-${(date.getMonth() + 1)>9?(date.getMonth() + 1):'0'+(date.getMonth() + 1)}-${(date.getDate())>9?(date.getDate()):'0'+(date.getDate())}`;\n            this.showCalendar1 = false;\n        },\n        onConfirmEnd(date) {\n            this.model.endDate = `${date.getFullYear()}-${(date.getMonth() + 1)>9?(date.getMonth() + 1):'0'+(date.getMonth() + 1)}-${(date.getDate())>9?(date.getDate()):'0'+(date.getDate())}`;\n            this.showCalendar2 = false;\n        },\n        changeStationId(value){\n            this.stationId = value.value;\n        }\n    },\n    mounted() {\n        this.getStationList()\n    }\n}\n</script>\n\n<style scoped>\n.list li .van-col--15 div span{\n    border-right: none;\n    display: block;\n}\n.bottomBtn {\n        border-top: 1px solid #eee;\n        position: fixed;\n        bottom: 0;\n    }\n</style>"]}]}