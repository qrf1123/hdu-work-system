{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/admission/Admission.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/admission/Admission.vue","mtime":1605768204000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUb3BOYXYgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Ub3BOYXYudnVlJwppbXBvcnQgQm90dG9tTmF2IGZyb20gJ0AvY29tcG9uZW50cy90ZWFjaGVyL0JvdHRvbU5hdi52dWUnCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmVzdWx0OiBbXSwKICAgICAgICAgICAgbGlzdDogW10sCiAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICAgICAgICBhY3RpdmVOYW1lczogWycnXSwKICAgICAgICB9OwogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBUb3BOYXYsCiAgICAgICAgQm90dG9tTmF2CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZVNlbGVjdEFsbChlKSB7CiAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBlLnRhcmdldC5jbGFzc05hbWUKICAgICAgICAgICAgaWYoY2xhc3NOYW1lLmluY2x1ZGVzKCd2YW4tY2hlY2tib3gnKSB8fCBjbGFzc05hbWUuaW5jbHVkZXMoJ3Zhbi1pY29uLXN1Y2Nlc3MnKSkgewogICAgICAgICAgICAgICAgaWYodGhpcy5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jaGVja2JveEdyb3VwLnRvZ2dsZUFsbChmYWxzZSk7CiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jaGVja2JveEdyb3VwLnRvZ2dsZUFsbCh0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYoY2xhc3NOYW1lLmluY2x1ZGVzKCd2YW4tYnV0dG9uJykpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn56Gu5a6a5LiA6ZSu5b2V5Y+W6YCJ5Lit5a2m55Sf5ZCX77yfJwogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqID0gdGhpcy50cmFuc2xhdGVUb09iaih0aGlzLnJlc3VsdCkKICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSB0aGlzLnRyYW5zbGF0ZVRvQXJyKG9iaikKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnIpCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRW1wbG95KGFwcGx5SWQpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdTdHVkZW50RGV0YWlsJywgcGFyYW1zOiB7YXBwbHlJZDogYXBwbHlJZH19KQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlTWFudWFsKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL21hbnVhbERlYWwnKQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0RW1wbG95TGlzdHMoKSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGFqYXguZ2V0KCcvYXBpL3N0YXRpb24vbXlTdGF0aW9uTWFuYWdlbWVudCcpCiAgICAgICAgICAgIGlmKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdCkKICAgICAgICB9LAogICAgICAgIHRyYW5zbGF0ZVRvT2JqKGFycikgewogICAgICAgICAgICByZXR1cm4gYXJyLnJlZHVjZSgoYWNjLGN1cikgPT4gewogICAgICAgICAgICBsZXQgc3BsaXREYXRhID0gY3VyLnNwbGl0KCcsJykKICAgICAgICAgICAgbGV0IHN0YXRpb25JZCwgYXBwbHlJZAogICAgICAgICAgICBzdGF0aW9uSWQgPSBwYXJzZUludChzcGxpdERhdGFbMF0pCiAgICAgICAgICAgIGFwcGx5SWQgPSBwYXJzZUludChzcGxpdERhdGFbMV0pCiAgICAgICAgICAgIGlmKHN0YXRpb25JZCBpbiBhY2MpIHsKICAgICAgICAgICAgICAgIGFjY1tzdGF0aW9uSWRdLnB1c2goYXBwbHlJZCkKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgYWNjW3N0YXRpb25JZF0gPSBbYXBwbHlJZF0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYWNjCiAgICAgICAgfSx7fSkKICAgICAgICB9LAogICAgICAgIHRyYW5zbGF0ZVRvQXJyKG9iaikgewogICAgICAgICAgICBjb25zdCBkYXRhID0gW10KICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gb2JqKSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0ge30KICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0aW9uSWQgPSBwYXJzZUludChrZXkpCiAgICAgICAgICAgICAgICByZXN1bHQuYXBwbHlJZCA9IG9ialtrZXldCiAgICAgICAgICAgICAgICBkYXRhLnB1c2gocmVzdWx0KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBkYXRhCiAgICAgICAgfSwKICAgICAgICBnZXRFbXBvbHlTdGF0dXMoKSB7CgogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuZ2V0RW1wbG95TGlzdHMoKQogICAgfQp9Cg=="},{"version":3,"sources":["Admission.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Admission.vue","sourceRoot":"src/views/teacher/admission","sourcesContent":["<template>\n    <div class=\"admission\">\n        <top-nav title=\"录取管理\" :isShow=\"false\" />\n        <van-collapse v-model=\"activeNames\">\n            <van-checkbox-group ref=\"checkboxGroup\" v-model=\"result\">\n            <van-collapse-item v-for=\"(item,index) in list\" :key=\"index\" :name=\"index + 1\">\n                <template #title>\n                    <div class=\"title\">\n                        <div>\n                            <span></span>\n                            <h4>{{item.stationSubject}}</h4>\n                            <span>{{item.publishDate}}</span>\n                        </div>\n                        <p>\n                            <span>所需人数：{{item.commitNum}}/{{item.totalNum}}人</span>\n                        </p>\n                    </div>\n                </template>\n                    <ul class=\"studentList\">\n                        <li>\n                            <van-button color=\"rgb(81, 125, 252)\" @click=\"handleManual\" size=\"mini\">添加学生</van-button>\n                        </li>\n                        <li v-for=\"employeeStudent in item.employeeStudentVoList\" :key=\"employeeStudent.applyId\">\n                            <van-checkbox :disabled=\"employeeStudent.stateCode !== '0'\" :name=\"item.id+','+employeeStudent.applyIid\">{{employeeStudent.studentName}}</van-checkbox>\n                            <van-button color=\"rgb(81, 125, 252)\" @click=\"handleEmploy(employeeStudent.applyIid)\" size=\"mini\" plain>{{employeeStudent.state}}</van-button>\n                        </li>\n                    </ul>\n            </van-collapse-item>\n            </van-checkbox-group>\n        </van-collapse>\n        <van-cell @click=\"handleSelectAll\" clickable>\n            <van-checkbox v-model=\"checked\">全选</van-checkbox>\n            <template #right-icon>\n                <van-button color=\"rgb(81, 125, 252)\" size=\"mini\">一键录取</van-button>\n            </template>\n        </van-cell>\n        <bottom-nav :active=\"2\"/>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nimport BottomNav from '@/components/teacher/BottomNav.vue'\nexport default {\n    data() {\n        return {\n            result: [],\n            list: [],\n            checked: false,\n            activeNames: [''],\n        };\n    },\n    components: {\n        TopNav,\n        BottomNav\n    },\n    methods: {\n        handleSelectAll(e) {\n            let className = e.target.className\n            if(className.includes('van-checkbox') || className.includes('van-icon-success')) {\n                if(this.checked) {\n                    this.$refs.checkboxGroup.toggleAll(false);\n                }else {\n                    this.$refs.checkboxGroup.toggleAll(true);\n                }\n            }else if(className.includes('van-button')) {\n                this.$dialog.confirm({\n                    message: '确定一键录取选中学生吗？'\n                }).then(() => {\n                    const obj = this.translateToObj(this.result)\n                    const arr = this.translateToArr(obj)\n                    console.log(arr)\n                }).catch(() => {})\n            }\n        },\n        handleEmploy(applyId) {\n            this.$router.push({name: 'StudentDetail', params: {applyId: applyId}})\n        },\n        handleManual() {\n            this.$router.push('/manualDeal')\n        },\n        async getEmployLists() {\n            const res = await this.$ajax.get('/api/station/myStationManagement')\n            if(res.data.code === 200) {\n                this.list = res.data.data\n            }\n            console.log(this.list)\n        },\n        translateToObj(arr) {\n            return arr.reduce((acc,cur) => {\n            let splitData = cur.split(',')\n            let stationId, applyId\n            stationId = parseInt(splitData[0])\n            applyId = parseInt(splitData[1])\n            if(stationId in acc) {\n                acc[stationId].push(applyId)\n            }else {\n                acc[stationId] = [applyId]\n            }\n            return acc\n        },{})\n        },\n        translateToArr(obj) {\n            const data = []\n            for(let key in obj) {\n                let result = {}\n                result.stationId = parseInt(key)\n                result.applyId = obj[key]\n                data.push(result)\n            }\n            return data\n        },\n        getEmpolyStatus() {\n\n        }\n    },\n    mounted() {\n        this.getEmployLists()\n    }\n}\n</script>\n\n\n<style scoped>\n    .admission {\n        padding-bottom: 100px;\n    }\n    .title div {\n        position: relative;\n        display: flex;\n        align-items: center;\n    }\n    .van-cell\n    .title div h4 {\n        margin-left: 15px;\n        width: 60%;\n    }\n    .van-collapse-item >>> .van-cell__right-icon {\n        position: absolute;\n        right: 8px;\n        color: #969799;\n    }\n    .title div span:nth-child(1) {\n        position: absolute;\n        top: 6px;\n        background-color: rgb(81, 125, 252);\n        width: 10px;\n        height: 10px;\n        border-radius: 50%;\n    }\n    .title div span:nth-child(3) {\n        font-size: 12px;\n        color: #666;\n        position: absolute;\n        right: 12px;\n        top: 1px;\n    }\n    .title p {\n        margin-left: 20px;\n        color: #555;\n    }\n    ul li {\n        display: flex;\n        height: 35px;\n        justify-content: space-between;\n        align-items: center;\n    }\n    .van-cell {\n        border-top: 1px solid #eee;\n        position: fixed;\n        bottom: 49px;\n    }\n</style>"]}]}