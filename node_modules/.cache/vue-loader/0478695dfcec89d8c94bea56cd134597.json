{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/user/Login.vue?vue&type=style&index=0&id=351e4496&scoped=true&lang=css&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/user/Login.vue","mtime":1605768204000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5sb2dvIHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9Ci5sb2dvIGltZyB7CiAgICBoZWlnaHQ6IDEzMHB4OwogICAgd2lkdGg6IDEzMHB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgbWFyZ2luLXRvcDogNTBweDsKfQoubG9nbyBzcGFuIHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Owp9CgoudmFuLWZvcm0gewogICAgcGFkZGluZzogMCAyMHB4Owp9Ci52YW4tZm9ybSAudmFuLWZpZWxkIHsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOwogICAgYm9yZGVyLXJhZGl1czogM3B4Owp9Ci5jaGVja2VkIHsKICAgIGNvbG9yOiAjMzIzMjMzOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIHBhZGRpbmc6IDEwcHggNXB4OwogICAgZm9udC1zaXplOiAxNHB4Owp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n    <div class=\"login\">\n        <top-nav title=\"登录\" :isShow=\"false\" />\n        <div class=\"logo\">\n            <img src=\"@/assets/image/logo-hdu.png\" alt=\"logo for school\" />\n            <span>杭州电子科技大学</span>\n        </div>\n        <van-form @submit=\"login\">\n            <van-field :border=\"false\" v-model=\"model.username\" label=\"用户名\" placeholder=\"请输入学号/工号\" left-icon=\"user-o\" clearable/>\n            <van-field :border=\"false\" v-model=\"model.password\" type=\"password\" placeholder=\"请输入密码\" label=\"密码\" left-icon=\"lock\" clearable/>\n            <div class=\"checked\">\n                <a>忘记密码？</a>\n                <van-checkbox v-model=\"checked\" shape=\"square\"><a>风险告知书</a></van-checkbox>\n            </div>\n            <van-button round block color=\"rgb(81, 125, 252)\" native-type=\"submit\">\n                登录\n            </van-button>\n        </van-form>\n    </div>\n</template>\n\n<script>\nimport TopNav from '@/components/common/TopNav.vue'\nexport default {\n    data() {\n        return {\n            model: {\n                username: '',\n                password: ''\n            },\n            checked: false\n        }\n    },\n    components: {\n        TopNav\n    },\n    methods: {\n        async login() {\n            if(this.checked) {\n                const resLogin = await this.$ajax.post('/apiLogin',this.model)\n                if(resLogin.data.code === 200) {\n                    sessionStorage.setItem('token',resLogin.data.token)\n                }else {\n                    this.$toast.fail(resLogin.data.msg)\n                }\n                const resInfo = await this.$ajax.get('/getInfo')\n                if(resInfo.data.code === 200) {\n                    console.log(resInfo.data)\n                    sessionStorage.setItem('roles', JSON.stringify(resInfo.data.data.roles))\n                    this.$toast.success({message: '登陆成功',duration: 1000})\n                }\n                setTimeout(() => {\n                    let role = sessionStorage.getItem('roles')\n                    if(role && role.includes('学生')){\n                        this.$router.push('/employment')\n                    }else if(role && role.includes('用工老师')){\n                        this.$router.push('/message')\n                    }else {\n                        this.$toast.fail('角色不存在!')\n                    }\n                },1000)\n            }else {\n                this.$toast('请勾选风险告知书')\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n    .logo {\n        text-align: center;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .logo img {\n        height: 130px;\n        width: 130px;\n        border-radius: 50%;\n        margin-top: 50px;\n    }\n    .logo span {\n        font-size: 14px;\n        margin-top: 10px;\n        margin-bottom: 30px;\n    }\n\n    .van-form {\n        padding: 0 20px;\n    }\n    .van-form .van-field {\n        margin-bottom: 10px;\n        border: 1px solid #eee;\n        border-radius: 3px;\n    }\n    .checked {\n        color: #323233;\n        display: flex;\n        justify-content: space-between;\n        padding: 10px 5px;\n        font-size: 14px;\n    }\n</style>"]}]}