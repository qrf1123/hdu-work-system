{"remainingRequest":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/publish/mystations.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/src/views/teacher/publish/mystations.vue","mtime":1618155590255},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenrixin/HDUWorkStudy/Mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMaXN0TGF5b3V0IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vTGlzdExheW91dC52dWUnCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcHVibGlzaExpc3Q6IFtdLAogICAgICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICAgICAgcHJvY2Vzc1N0YXR1czogMCwKICAgICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIGZpbmlzaGVkOiBmYWxzZQogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgLy8gVG9wTmF2LAogICAgICAgIC8vIEJvdHRvbU5hdiwKICAgICAgICBMaXN0TGF5b3V0LAogICAgICAgIC8vIFRhYnMsCiAgICAgICAgLy8gc2hlbnBpLAogICAgICAgIC8vIG15c3RhdGlvbnMKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgaGFuZGxlU3RhcnQoaWQpewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhamF4LnBvc3QoIi9zeXN0ZW0vYXBpL3RlYWNoZXIvc3RhcnRTdGF0aW9uIix7c3RhdGlvbklkIDogaWR9KQogICAgICAgICAgICBpZihyZXMuZGF0YS5jb2RlID09PSAyMDApewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoIuaIkOWKn+W8gOWni+ivpeWyl+S9jSEiKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UHVibGlzaCgpCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoIuaTjeS9nOWksei0pSzor7fph43or5XvvZ4iKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgaGFuZGxlU3RvcChpZCl7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGFqYXgucG9zdCgiL3N5c3RlbS9hcGkvdGVhY2hlci9lbmRTdGF0aW9uIix7c3RhdGlvbklkIDogaWR9KQogICAgICAgICAgICBpZihyZXMuZGF0YS5jb2RlID09PSAyMDApewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoIuaIkOWKn+e7k+adn+ivpeWyl+S9jSEiKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UHVibGlzaCgpCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoIuaTjeS9nOWksei0pSzor7fph43or5XvvZ4iKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIGFzeW5jIGhhbmRsZURlbGV0ZShpbmRleCxpZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnB1Ymxpc2hMaXN0W2luZGV4XSkKICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kYWpheC5wb3N0KCcvYXBpL2FjdGl2aXRpL2RlbGV0ZVByb2Nlc3MnLCB7cHJvY2Vzc0luc3RhbmNlSWQ6IGlkfSkKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgICAgIGlmKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoTGlzdC5zcGxpY2UoaW5kZXgsMSkKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MocmVzLm1zZykKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QuZmFpbCgn5Yig6Zmk5aSx6LSl77yM6K+356iN5ZCO6YeN6K+V77yBJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRGV0YWlsKGlkKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6ICcvam9iSW5mbycsCiAgICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgICAgIHN0YXRpb25JZDogaWQsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRQdWJsaXNoKCkgewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhamF4LmdldChgL3N5c3RlbS9hcGkvdGVhY2hlci9xdWVyeVRlYWNoZXJTdGF0aW9uYCkKICAgICAgICAgICAgaWYocmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS53b3JrU3RhcnRUaW1lID0gaXRlbS53b3JrU3RhcnRUaW1lLnNsaWNlKDAsMTApOwogICAgICAgICAgICAgICAgICAgIC8v5rKh5pyJ5pu05paw5pe26Ze0IOmCo+S5iOabtOaWsOaXtumXtOS4uuWIm+W7uuaXtumXtAogICAgICAgICAgICAgICAgICAgIC8vIGlmKCFpdGVtLnVwZGF0ZVRpbWUpewogICAgICAgICAgICAgICAgICAgIC8vICAgICBpdGVtLnVwZGF0ZVRpbWUgPSBpdGVtLmNyZWF0ZVRpbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGl0ZW0udXBkYXRlVGltZSA9IGl0ZW0udXBkYXRlVGltZS5zbGljZSgwLDEwKTsKICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnN0YXRpb25TdGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiMSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdGF0aW9uU3RhdGUgPSAi5bey55Sf5pWIIiAvLyDmmoLkuJTorqTkuLrmmK8g5a6h5qC46YCa6L+H55qE5Y+tCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICIyIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YXRpb25TdGF0ZSA9ICLlt7LliKDpmaQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICIzIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YXRpb25TdGF0ZSA9ICLlt7LlvIDlp4siCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICI0IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YXRpb25TdGF0ZSA9ICLlt7Lnu5PmnZ8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMucHVibGlzaExpc3QgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wdWJsaXNoTGlzdCk7CiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgIAogICAgICAgIGFzeW5jIGhhbmRsZVN0ZXAocHJvY2Vzc0lkKSB7CiAgICAgICAgICAgIHRoaXMuc2hvdyA9IHRydWUKICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kYWpheC5nZXQoJy9hcGkvYWN0aXZpdGkvcXVlcnlUYXNrRGV0YWlscycsIHtwYXJhbXM6IHtwcm9jZXNzSW5zdGFuY2VJZDogcHJvY2Vzc0lkfX0pCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgICBjb25zdCBzdGF0dXMgPSByZXMuZGF0YS5kYXRhWzBdLnJlamVjdFN0YXR1cwogICAgICAgICAgICB0aGlzLnByb2Nlc3NTdGF0dXMgPSBwYXJzZUludChzdGF0dXMpCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRQdWJsaXNoKCkKICAgIH0KfQo="},{"version":3,"sources":["mystations.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mystations.vue","sourceRoot":"src/views/teacher/publish","sourcesContent":["<template>\n    <van-tab title=\"我的岗位\">\n        <ul class=\"list\">\n            <!-- <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"加载完成!!!\" @load=\"onLoad\"> -->\n            <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"加载完成!!!\" >\n                <list-layout :firstLayout=\"0\" v-for=\"(item,index) in publishList\" :key=\"index\">\n                    <van-icon size=\"40\" color=\"rgb(81, 125, 252)\" name=\"info\" slot=\"left-icon\"/>\n                    <div slot=\"content\">\n                        <h4 @click=\"handleDetail(item.stationId)\">{{item.stationName}}</h4>\n                        <div>\n                            <span>{{item.workStartTime}}</span>\n                        </div>\n                    </div>\n                    <div slot=\"right\">\n                        <span class=\"date\">{{item.stationState}}</span>\n                        <div class=\"right-bottom\">\n                            <van-button v-if=\"item.stationState === '已生效'\" style=\"margin-left: 10px\"  color=\"rgb(81, 125, 252)\" size=\"mini\" @click=\"handleStart(item.stationId)\">开始</van-button>\n                            <van-button v-if=\"item.stationState === '已开始'\" style=\"margin-left: 10px\"  color=\"rgb(81, 125, 252)\" size=\"mini\" @click=\"handleStop(item.stationId)\">结束</van-button>\n                        </div>\n                    </div>\n                </list-layout>\n            </van-list>\n        </ul>\n    </van-tab>\n</template>\n\n<script>\nimport ListLayout from '@/components/common/ListLayout.vue'\nexport default {\n    data() {\n        return {\n            publishList: [],\n            show: false,\n            processStatus: 0,\n            pageNum: 1,\n            loading: false,\n            finished: false\n        }\n    },\n    components: {\n        // TopNav,\n        // BottomNav,\n        ListLayout,\n        // Tabs,\n        // shenpi,\n        // mystations\n    },\n    methods: {\n        async handleStart(id){\n            const res = await this.$ajax.post(\"/system/api/teacher/startStation\",{stationId : id})\n            if(res.data.code === 200){\n                this.$toast(\"成功开始该岗位!\");\n                this.getPublish()\n            }else{\n                this.$toast(\"操作失败,请重试～\");\n            }\n        },\n        async handleStop(id){\n            const res = await this.$ajax.post(\"/system/api/teacher/endStation\",{stationId : id})\n            if(res.data.code === 200){\n                this.$toast(\"成功结束该岗位!\");\n                this.getPublish()\n            }else{\n                this.$toast(\"操作失败,请重试～\");\n            }\n            \n        },\n        async handleDelete(index,id) {\n            console.log(this.publishList[index])\n            const res = await this.$ajax.post('/api/activiti/deleteProcess', {processInstanceId: id})\n            console.log(res.data)\n            if(res.data.code === 200) {\n                this.publishList.splice(index,1)\n                this.$toast.success(res.msg)\n            }else {\n                this.$toast.fail('删除失败，请稍后重试！')\n            }\n        },\n        handleDetail(id) {\n            this.$router.push({\n                path: '/jobInfo',\n                query: {\n                    stationId: id,\n                }\n            })\n        },\n        async getPublish() {\n            const res = await this.$ajax.get(`/system/api/teacher/queryTeacherStation`)\n            if(res.data) {\n                res.data.forEach(item => {\n                    item.workStartTime = item.workStartTime.slice(0,10);\n                    //没有更新时间 那么更新时间为创建时间\n                    // if(!item.updateTime){\n                    //     item.updateTime = item.createTime;\n                    // }else{\n                    //     item.updateTime = item.updateTime.slice(0,10);\n                    // }\n                    switch (item.stationState) {\n                            case \"1\":\n                                item.stationState = \"已生效\" // 暂且认为是 审核通过的叭\n                                break;\n                            case \"2\":\n                                item.stationState = \"已删除\"\n                                break;\n                            case \"3\":\n                                item.stationState = \"已开始\"\n                                break;\n                            case \"4\":\n                                item.stationState = \"已结束\"\n                                break;\n                            default:\n                                break;\n                        }\n                });\n                this.publishList = res.data\n                console.log(this.publishList);\n                this.finished = true\n                \n            }\n            \n        },\n       \n        async handleStep(processId) {\n            this.show = true\n            const res = await this.$ajax.get('/api/activiti/queryTaskDetails', {params: {processInstanceId: processId}})\n            console.log(res.data)\n            const status = res.data.data[0].rejectStatus\n            this.processStatus = parseInt(status)\n        }\n    },\n    mounted() {\n        this.getPublish()\n    }\n}\n</script>\n\n<style scoped>\n    .middle {\n        margin: 0 10px;\n    }\n    .van-cell {\n        margin-bottom: 10px;\n    }\n</style>"]}]}